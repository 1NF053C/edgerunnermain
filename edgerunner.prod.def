Bootstrap: docker
From: node:18

%files
    * /app

%post
    apt-get update
    cd /app
    npm install
    npm run build 

%environment
    export PATH=/app/node_modules/.bin:$PATH

%startscript
    cd /app && npm run dev

%runscript
    cd /app && npm run start

%help
    This container includes a Node.js application. 
    To run the development server: apptainer run --app dev <container_name>
    To start the production server: apptainer run <container_name>

## BUILD IMAGE CMD
# apptainer build edgerunner.prod.sif edgerunner.prod.def

## RUN CONTAINER CMD
# apptainer run --bind ./:/app edgerunner.prod.sif
